#!/bin/bash

# Quick Jenkins Setup Script for Impact LMS Deployment

echo "=== Jenkins Setup for Impact LMS Deployment ==="
echo ""

echo "1. JENKINS CREDENTIALS SETUP"
echo "   Go to Jenkins ‚Üí Manage Jenkins ‚Üí Manage Credentials"
echo "   Add the following credential:"
echo ""
echo "   Type: Secret text"
echo "   ID: server-ssh-password"
echo "   Secret: CStp4DR@2025#"
echo "   Description: SSH password for deployment server (82.25.109.1)"
echo ""

echo "2. JENKINS PIPELINE JOB SETUP"
echo "   - Create new Pipeline job named 'impact-lms-deployment'"
echo "   - Set Pipeline definition to 'Pipeline script from SCM'"
echo "   - Configure your Git repository URL"
echo "   - Set Script Path to 'Jenkinsfile'"
echo ""

echo "3. REQUIRED JENKINS PLUGINS"
echo "   Install these plugins if not already installed:"
echo "   - Pipeline"
echo "   - Git"
echo "   - Docker Pipeline"
echo "   - SSH Agent"
echo "   - Credentials Binding"
echo ""

echo "4. JENKINS SYSTEM REQUIREMENTS"
echo "   - Docker installed on Jenkins server"
echo "   - Network access to deployment server (82.25.109.1)"
echo "   - Sufficient disk space for Docker images"
echo ""

echo "5. DEPLOYMENT FLOW"
echo "   The pipeline will:"
echo "   ‚úÖ Checkout code from Git"
echo "   ‚úÖ Build Docker images for frontend and backend"
echo "   ‚úÖ Run automated tests"
echo "   ‚úÖ Perform security scans"
echo "   ‚úÖ Deploy to server (82.25.109.1)"
echo "   ‚úÖ Run health checks"
echo "   ‚úÖ Setup monitoring"
echo ""

echo "6. SERVER PREPARATION"
echo "   The deployment will automatically:"
echo "   ‚úÖ Install Docker and Docker Compose"
echo "   ‚úÖ Configure firewall (UFW)"
echo "   ‚úÖ Setup application in /opt/impact-lms"
echo "   ‚úÖ Configure monitoring and logging"
echo ""

echo "7. POST-DEPLOYMENT ACCESS"
echo "   Application will be available at:"
echo "   üåê Frontend: http://82.25.109.1/"
echo "   üîß API: http://82.25.109.1/api/"
echo "   üìä Health Check: http://82.25.109.1/api/health"
echo ""

echo "8. MONITORING AND LOGS"
echo "   üìÅ Application logs: docker-compose logs"
echo "   üìÅ Deployment logs: /var/log/impact-lms-deployment.log"
echo "   üìÅ Monitoring: /usr/local/bin/impact-lms-monitor.sh"
echo ""

echo "9. SECURITY NOTES"
echo "   ‚ö†Ô∏è  Change default passwords in .env.production"
echo "   ‚ö†Ô∏è  Configure SSL certificates for HTTPS (recommended)"
echo "   ‚ö†Ô∏è  Regular security updates and backups"
echo ""

echo "10. FIRST DEPLOYMENT"
echo "    After Jenkins setup, trigger the first build:"
echo "    - Go to Jenkins job ‚Üí Build Now"
echo "    - Monitor the console output"
echo "    - Check application accessibility after deployment"
echo ""

echo "=== Setup Complete! ==="
echo "For detailed instructions, see JENKINS_SETUP.md"