#!/bin/bash

# Quick Jenkins Setup Script for Impact LMS Deployment
# Repository: https://github.com/krishnaprasadnr702119/impact-new.git
# Local Jenkins Server Configuration

echo "=== Jenkins Setup for Impact LMS Deployment ==="
echo ""

echo "üìç REPOSITORY INFORMATION"
echo "   GitHub Repository: https://github.com/krishnaprasadnr702119/impact-new.git"
echo "   Target Server: 82.25.109.1"
echo "   Jenkins: Local Server"
echo ""

echo "1. JENKINS JOB SETUP (Local Jenkins)"
echo "   - Open your local Jenkins: http://localhost:8080"
echo "   - Create new Pipeline job named 'impact-lms-deployment'"
echo "   - Pipeline Configuration:"
echo "     ‚Ä¢ Definition: Pipeline script from SCM"
echo "     ‚Ä¢ SCM: Git"
echo "     ‚Ä¢ Repository URL: https://github.com/krishnaprasadnr702119/impact-new.git"
echo "     ‚Ä¢ Credentials: Add GitHub credentials if private repo"
echo "     ‚Ä¢ Branch: */main (or your default branch)"
echo "     ‚Ä¢ Script Path: Jenkinsfile"
echo ""

echo "2. NO CREDENTIALS NEEDED (Password in Pipeline)"
echo "   ‚úÖ Server password (CStp4DR@2025#) is configured in pipeline"
echo "   ‚úÖ No additional Jenkins credentials required"
echo "   ‚ö†Ô∏è  Consider using Jenkins credentials for better security"
echo ""

echo "3. REQUIRED JENKINS PLUGINS"
echo "   Install these plugins in your local Jenkins:"
echo "   - Pipeline"
echo "   - Git"
echo "   - Docker Pipeline"
echo "   - GitHub Integration"
echo ""

echo "4. LOCAL JENKINS REQUIREMENTS"
echo "   ‚úÖ Docker installed on Jenkins server"
echo "   ‚úÖ Network access to deployment server (82.25.109.1)"
echo "   ‚úÖ Sufficient disk space for Docker images"
echo "   ‚úÖ sshpass package (will be auto-installed)"
echo ""

echo "5. DEPLOYMENT FLOW"
echo "   The pipeline will:"
echo "   ‚úÖ Checkout code from Git"
echo "   ‚úÖ Build Docker images for frontend and backend"
echo "   ‚úÖ Run automated tests"
echo "   ‚úÖ Perform security scans"
echo "   ‚úÖ Deploy to server (82.25.109.1)"
echo "   ‚úÖ Run health checks"
echo "   ‚úÖ Setup monitoring"
echo ""

echo "6. SERVER PREPARATION"
echo "   The deployment will automatically:"
echo "   ‚úÖ Install Docker and Docker Compose"
echo "   ‚úÖ Configure firewall (UFW)"
echo "   ‚úÖ Setup application in /opt/impact-lms"
echo "   ‚úÖ Configure monitoring and logging"
echo ""

echo "7. POST-DEPLOYMENT ACCESS"
echo "   Application will be available at:"
echo "   üåê Frontend: http://82.25.109.1/"
echo "   üîß API: http://82.25.109.1/api/"
echo "   üìä Health Check: http://82.25.109.1/api/health"
echo ""

echo "8. MONITORING AND LOGS"
echo "   üìÅ Application logs: docker-compose logs"
echo "   üìÅ Deployment logs: /var/log/impact-lms-deployment.log"
echo "   üìÅ Monitoring: /usr/local/bin/impact-lms-monitor.sh"
echo ""

echo "9. SECURITY NOTES"
echo "   ‚ö†Ô∏è  Change default passwords in .env.production"
echo "   ‚ö†Ô∏è  Configure SSL certificates for HTTPS (recommended)"
echo "   ‚ö†Ô∏è  Regular security updates and backups"
echo ""

echo "10. FIRST DEPLOYMENT"
echo "    After Jenkins setup, trigger the first build:"
echo "    - Go to Jenkins job ‚Üí Build Now"
echo "    - Monitor the console output"
echo "    - Check application accessibility after deployment"
echo ""

echo "=== Setup Complete! ==="
echo "For detailed instructions, see JENKINS_SETUP.md"